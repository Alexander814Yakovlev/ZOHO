"use strict";function addEventListenerToForm(){var e=document.querySelector('select[id="country"]'),o=document.querySelector(".signupform .za-rmobile-container #rmobile");e&&e.addEventListener("change",makeContactMandatory,!1),o&&o.addEventListener("keyup",updatePhoneNumber,!1)}function isContactRequiredCountry(){var e={AE:!0,SA:!0,BH:!0,GB:!0,CA:!0,US:!0,KW:!0,QA:!0,OM:!0,MX:!0},o=document.getElementById("country").value,r=o in e;return{isNeeded:r,isMandatory:!!r&&e[o]}}function updatePhoneNumber(e){var o=e.target.value,r=document.getElementById("contact_number");r&&(r.value=o)}function makeContactMandatory(){var e=$("#signupform");if(e.length){var o=e.data().validator.settings.rules["r_address/1.phone"],r=document.querySelector(".za-contact-number-container"),n=isContactRequiredCountry();o.isValidContactNumber=!1,o.required=!1,n.isNeeded?(r.style.display="block",n.isMandatory&&(o.isValidContactNumber=!0,o.required=!0)):(r.style.display="none",r.querySelector("input").value=""),r.classList.contains("field-error")&&(n.isNeeded&&n.isMandatory||(r.classList.remove("field-error"),r.querySelector(".field-msg").remove()))}}function openSignUpPopup(){0!==document.body.scrollTop||0!==document.documentElement.scrollTop?(window.scrollTo(0,0),$(".signup-toggle-container").slideDown()):$(".signup-toggle-container").slideToggle("slow")}function closeSignUp(){$(".signup-toggle-container").slideUp()}function onSignupReady(){var e=window.location.href||"",o=-1===e.indexOf("/icici-integration/reseller-signup"),r=-1===e.indexOf("lp/books/m1xchange-integration"),n=-1!==e.indexOf("lp/books/icai");updateFeatureInput(),updateSourceInput(),addEventListenerToForm(),$.fn.zaSignUp.defaults.disableSubmit=function(){return"Sign Up"},$.fn.zaSignUp.defaults.getConfirmationTemplate=function(){return""},$.validator.addMethod("isValidContactNumber",function(e,o){var r=document.getElementById("country").value,n=0!==e.trim().length&&/^\+?(?:\d\s?)+$/.test(e);return"IN"===r?n&&/^\d{10}$/.test(e):n}),$.validator.addMethod("isValidMrnNumber",function(e,o){return 0!==e.trim().length&&e.trim().length<9&&/^\+?(?:\d\s?)+$/.test(e)}),$("#signupform").zaSignUp({validator:{ignore:[],rules:{"r_address/1.company_name":{required:r},country:{required:!0},"r_address/1.phone":{},x_mrn_frn:{required:n,isValidMrnNumber:n}},messages:{"r_address/1.company_name":{required:"Please enter your organization name"},country:{required:"Please enter your country"},"r_address/1.phone":{required:"Please enter your mobile number",isValidContactNumber:"Please enter a valid mobile number"},x_mrn_frn:{required:"Please enter your MRN number",isValidMrnNumber:"Please enter valid MRN number"}}},onsubmit:function(){$("#za-signup-btn").attr("disabled",!0),"IN"!==document.getElementById("country").value&&$("#ZI-load").css("display","block"),window.zohoGASignupEvent()},oncomplete:function(e){var o=$.fn.zaSignUp.SIGNUP_STATE;if($.each(o,function(o,r){if(e===r)return o,!1}),e===o.OTP_ERROR){var r=document.querySelector(".btn-verify");r&&(r.value="VERIFY",r.disabled=!1)}e===o.ERROR&&($("#za-signup-btn").attr("disabled",!1),$("#ZI-load").css("display","none"));var n=document.querySelector(".signupotpcontainer .verifyheader");n&&(n.innerText="We'll send a code to")},x_signup:{password_required:o}}),window.afterAccountJSLoaded(),makeContactMandatory()}function initiateOTPValidation(){var e=document.querySelector(".btn-verify");e.disabled=!0,e.value="VERIFYING...",window.validateOTP()}function checkpassword(){var e=$("#password").val(),o=$("#pwd-field");o.removeClass("pwd-field-succ pwd-field-error"),e&&e.length>7?o.addClass("pwd-field-succ"):o.addClass("pwd-field-error")}function updateFeatureInput(){var e,o,r;if(e=location.search.split("?")[1])for(var n=(o=e.split("&")).length;n>0;n--){var a=o[n-1];if("feature"===(a=a.split("="))[0]&&a[1]){r=decodeURIComponent(a[1]);break}}r&&(document.getElementById("x_feature").value=r)}function updateSourceInput(e){(e=e||getParameterByName("x_source"))&&(document.getElementById("x_source").value=e)}function getParameterByName(e,o){o||(o=window.location.href);e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(o);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function validateGappsDomain(e){return""===e.domain.value.trim()?($("#gappserormsg").show(),!1):(document.googleappsform.domain.value=e.domain.value,document.googleappsform.submit(),!1)}var hostUrl=document.location.host,refCode=document.location.search,isRefCodePresent=!1;-1!==refCode.indexOf("referralCode=")&&(refCode=refCode.split("&").filter(function(e){return-1!==e.indexOf("referralCode=")})[0],isRefCodePresent=!0);var params={servicename:"ZohoBooks",loadcss:!1};if(-1!==location.href.indexOf("lp/books/wave-active")){var domainName=-1!==hostUrl.indexOf(".zoho.com")?"zoho.com":"localzoho.com";params.serviceurl="https://books.".concat(domainName,"/app?wave_source=wave_existing")}else if(-1!==location.href.indexOf("lp/books/wave-new")){domainName=-1!==hostUrl.indexOf(".zoho.com")?"zoho.com":"localzoho.com";params.serviceurl="https://books.".concat(domainName,"/app?wave_source=wave_new")}else if(-1!==location.href.indexOf("lp/books/m1xchange-integration")){domainName=-1!==hostUrl.indexOf(".zoho.com")?"zoho.in":"localzoho.com";params.servicename="ZohoPayments",params.serviceurl="https://store.".concat(domainName,"/CouponRedirect.do?creditsInfo=false&redirectUrl=https://books.").concat(domainName,"&websiteUrl=https://www.zoho.com/lp/books/m1xchange-integration/")}else if(-1!==location.href.indexOf("books/icici-integration/reseller-signup")){domainName=-1!==hostUrl.indexOf(".zoho.com")?"zoho.in":"localzoho.in";params.serviceurl="https://books.".concat(domainName,"/ZB_logoutAction.do"),params.confirm_redirect_url="https://books.zoho.in/home?cs=true&websignup=true"}else if(-1!==location.href.indexOf("books/icici-integration")){domainName=-1!==hostUrl.indexOf(".zoho.com")?"zoho.in":"localzoho.in";params.serviceurl="https://books.zoho.in/home?cs=true&websignup=true"}else-1!==hostUrl.indexOf(".zoho.com")?params.serviceurl=isRefCodePresent?"https://books.zoho.com/home?"+refCode+"&cs=true&websignup=true":"https://books.zoho.com/home?cs=true&websignup=true":-1!==hostUrl.indexOf("workspacezoho")?params.serviceurl="https://books.localzoho.com/home?cs=true&websignup=true":params.serviceurl=isRefCodePresent?"https://books.localzoho.com/home"+refCode+"&cs=true&websignup=true":"https://books.localzoho.com/home?cs=true&websignup=true";function parseQuery(e){for(var o={},r=("?"===e[0]?e.substr(1):e).split("&"),n=0;n<r.length;n++){var a=r[n].split("=");o[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||"")}return o}var queryParams=parseQuery(location.search.slice(1));queryParams.partner_data&&(params.serviceurl+=params.serviceurl.indexOf("?")>=0?"&":"?",params.serviceurl=params.serviceurl+"partner_data="+queryParams.partner_data+"&is_partner_referral="+queryParams.is_partner_referral+"&partner="+queryParams.partner),queryParams.is_from_demo_app&&(params.serviceurl+=params.serviceurl.indexOf("?")>=0?"&":"?",params.serviceurl+="source=66",params.serviceurl+=queryParams.entity_signing_up_for?"&entity_signing_up_for=".concat(queryParams.entity_signing_up_for):"");